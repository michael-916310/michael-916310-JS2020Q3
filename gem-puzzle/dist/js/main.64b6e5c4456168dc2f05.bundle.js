(self.webpackChunkgem_puzzle=self.webpackChunkgem_puzzle||[]).push([[179],{45:(n,e,t)=>{"use strict";var r={config:{areaSize:4,durationIntervalId:null,isSound:!1},dominoArr:[],stepsCount:0,gameDuration:0,DOMElm:{rootElm:document.querySelector("#root"),gameSteps:null,gameDuration:null,bestResultContainer:null,gameArea:null,dominoElmArr:null,soundElm:!1,areaSizeElm:null},bestResultArr:[],updateDOMElmList:function(){this.DOMElm.bestResultContainer=document.querySelector(".best-result-container"),this.DOMElm.gameArea=document.querySelector(".game-area"),this.DOMElm.gameSteps=document.querySelector(".game-steps"),this.DOMElm.gameDuration=document.querySelector(".game-duration"),this.DOMElm.soundElm=document.querySelector("#config__sounds_chkbox_id"),this.DOMElm.areaSizeElm=document.querySelector("#config__area-size_id")},_getRandomInt:function(n,e){return Math.floor(Math.random()*(e-n+1))+n},restartGame:function(n){this.stepsCount=0,this.loadResults(),this.generateDominoArr(),this.restartDuration(n)},stopGame:function(){this.stepsCount=0,this.gameDuration=0,this.config.durationIntervalId&&clearInterval(this.config.durationIntervalId)},restartDuration:function(n){var e=this;this.config.durationIntervalId&&(clearInterval(this.config.durationIntervalId),this.config.durationIntervalId=null,this.gameDuration=0),this.config.durationIntervalId=setInterval((function(){e.gameDuration++,n&&n()}),1e3)},_isSovleable:function(){for(var n=0,e=0,t=0;t<this.dominoArr.length;t++){var r=this.dominoArr[t];if(r.isEmpty)e=Math.ceil((t+1)/this.config.areaSize);else for(var i=t+1;i<this.dominoArr.length;i++)r.num>this.dominoArr[i].num&&n++}return console.log("total:".concat(n," emptyLine:").concat(e)),(n+e)%2!=0},generateDominoArr:function(){var n=this;do{var e=Math.pow(this.config.areaSize,2);this.dominoArr=[];for(var t=function(){var t=n._getRandomInt(0,e-1);0==n.dominoArr.filter((function(n){return n.num===t})).length&&n.dominoArr.push({num:t,isEmpty:0==t})};this.dominoArr.length<e;)t()}while(!this._isSovleable())},moveDomino:function(n,e){var t=this;if(n<this.dominoArr.length){var r=-1,i="";if(n+this.config.areaSize<this.dominoArr.length&&this.dominoArr[n+this.config.areaSize].isEmpty&&(r=n+this.config.areaSize,i="transform: translateY(100%)"),n-this.config.areaSize>=0&&this.dominoArr[n-this.config.areaSize].isEmpty&&(r=n-this.config.areaSize,i="transform: translateY(-100%)"),n-1>=0&&this.dominoArr[n-1].isEmpty&&n%this.config.areaSize>0&&(r=n-1,i="transform: translateX(-100%)"),n+1<this.dominoArr.length&&this.dominoArr[n+1].isEmpty&&(n+1)%this.config.areaSize>0&&(r=n+1,i="transform: translateX(100%)"),r>=0)return this.DOMElm.dominoElmArr[n].addEventListener("transitionend",(function(){t.dominoArr[r].num=t.dominoArr[n].num,t.dominoArr[r].isEmpty=!1,t.dominoArr[n].isEmpty=!0,t.dominoArr[n].num=0,e()})),this.playSound(),this.stepsCount++,this.DOMElm.dominoElmArr[n].style=i,!0}},playSound:function(){if(this.config.isSound){var n=new Audio;n.src="./assets/sound.mp3",n.autoplay=!0}},isGameFinished:function(){return this.dominoArr.every((function(n,e,t){return 0==e?1==n.num:e==t.length-1?0==n.num:n.num==t[e-1].num+1}))},addResultToList:function(){if(this.isGameFinished()){var n=[];localStorage.gameList&&(n=JSON.parse(localStorage.gameList)),n.push({areaSize:this.config.areaSize,duration:this.gameDuration,stepsCount:this.stepsCount}),localStorage.gameList=JSON.stringify(n)}},loadResults:function(){var n=this,e=[];localStorage.gameList&&(e=JSON.parse(localStorage.gameList)),e.sort((function(n,e){return n.stepsCount-e.stepsCount})),this.bestResultArr=[],e.forEach((function(e){n.bestResultArr.length<10&&n.bestResultArr.push(e)}))},saveCurrentGame:function(){var n={config:{areaSize:this.config.areaSize,isSound:this.config.isSound},gameDuration:this.gameDuration,stepsCount:this.stepsCount,dominoArr:this.dominoArr};localStorage.savedGame=JSON.stringify(n)},loadCurrentGame:function(){var n=JSON.parse(localStorage.savedGame||JSON.stringify("{}"));4==Object.keys(n).length&&(this.config.areaSize=n.config.areaSize,this.config.isSound=n.config.isSound,this.gameDuration=n.gameDuration,this.stepsCount=n.stepsCount,this.dominoArr=n.dominoArr)}};function i(n){return function(n){if(Array.isArray(n))return o(n)}(n)||function(n){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(n))return Array.from(n)}(n)||function(n,e){if(!n)return;if("string"==typeof n)return o(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);"Object"===t&&n.constructor&&(t=n.constructor.name);if("Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return o(n,e)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function a(){if(r.DOMElm.bestResultContainer){for(var n=i(r.bestResultArr);r.DOMElm.bestResultContainer.firstElementChild.childNodes.length;)r.DOMElm.bestResultContainer.firstElementChild.firstChild.remove();var e=document.createDocumentFragment(),t=document.createElement("legend");t.innerText="Лучшие результаты (по ходам)",r.DOMElm.bestResultContainer.firstElementChild.appendChild(t),n.forEach((function(n,t){var r=document.createElement("div"),i=Math.floor(n.duration/60),o=1=="".concat(i).length?"0".concat(i):"".concat(i),a=n.duration-60*i,s=1=="".concat(a).length?"0".concat(a):"".concat(a);r.innerHTML="поле:".concat(n.areaSize,"*").concat(n.areaSize," ходов:").concat(n.stepsCount," время: ").concat(o,":").concat(s),e.appendChild(r)})),r.DOMElm.bestResultContainer.firstElementChild.appendChild(e)}}function s(){if(r.gameDuration){var n=Math.floor(r.gameDuration/60),e=1=="".concat(n).length?"0".concat(n):"".concat(n),t=r.gameDuration-60*n,i=1=="".concat(t).length?"0".concat(t):"".concat(t);return"".concat(e,":").concat(i)}return"00:00"}function l(){r.DOMElm.gameSteps&&(r.DOMElm.gameSteps.innerText=r.stepsCount),r.DOMElm.gameDuration&&(r.DOMElm.gameDuration.innerText=s())}function c(){r.isGameFinished()&&(alert("Ура! Вы решили головоломку за ".concat(s()," и ").concat(r.stepsCount," ходов")),r.addResultToList(),r.loadResults(),a(),r.restartGame(l)),function(){if(r.config.areaSize){for(var n=r.DOMElm.gameArea.classList,e=0;e<n.length;e++){n[e].replace("game-area","").length&&n.remove(n[e])}n.add("game-area-".concat(r.config.areaSize))}}(),function(){if(r.DOMElm.gameArea){for(var n=i(r.dominoArr);r.DOMElm.gameArea.childNodes.length;)r.DOMElm.gameArea.firstChild.remove();if(r.DOMElm.dominoElmArr=[],n.length){var e=document.createDocumentFragment();n.forEach((function(n,t){var i=document.createElement("div");i.innerText=n.num,i.setAttribute("data-idx",t),i.classList.add("domino"),i.classList.add("domino-".concat(r.config.areaSize)),n.isEmpty&&i.classList.add("domino-empty"),r.DOMElm.dominoElmArr.push(i),e.appendChild(i)})),r.DOMElm.gameArea.appendChild(e)}}}(),l(),function(){for(var n=-1,e=-1,t=-1,i=-1,o=-1,a=0;a<r.dominoArr.length;a++)r.dominoArr[a].isEmpty&&(o=a,n=a-r.config.areaSize,e=a+r.config.areaSize<r.dominoArr.length?a+r.config.areaSize:-1,a%r.config.areaSize>0&&(t=a-1),a+1<r.dominoArr.length&&(a+1)%r.config.areaSize>0&&(i=a+1));if(o>=0){var s=r.DOMElm.dominoElmArr[o];s.addEventListener("dragover",(function(n){n.preventDefault()})),s.addEventListener("drop",(function(n){n.preventDefault();var e=n.dataTransfer.getData("text");r.moveDomino(+e,c)}))}function l(n){var e=r.DOMElm.dominoElmArr[n];e.classList.add("domino-active"),e.setAttribute("draggable",!0),e.addEventListener("dragstart",(function(n){n.dataTransfer.setData("text",n.target.dataset.idx)}))}n>=0&&l(n),e>=0&&l(e),t>=0&&l(t),i>=0&&l(i)}()}var u=t(379),m=t.n(u),d=t(815),f={insert:"head",singleton:!1};m()(d.Z,f);d.Z.locals;var g=t(922),h={insert:"head",singleton:!1};m()(g.Z,h);g.Z.locals;r.restartGame(l),r.DOMElm.rootElm.insertAdjacentHTML("beforebegin",'\n  <header class="header">\n    <h1>Пятнашки</h1>\n    <h2>задание на RS-school</h2>\n  </header>\n  '),r.DOMElm.rootElm.insertAdjacentHTML("beforebegin",'\n    <article class = "result_config-container">\n\n      <article class="best-result-container">\n        <fieldset class="fieldset"></fieldset>\n      </article>\n\n      <article class="config-container">\n\n        <fieldset class="fieldset">\n          <legend>Настройки:</legend>\n\n          <div class="config__area-size-container">\n            <label for="config__area-size_id">Размер поля: </label>\n              <select class="config__area-size" id="config__area-size_id">\n                <option value="3">3*3</option>\n                <option value="4" selected>4*4</option>\n                <option value="5">5*5</option>\n                <option value="6">6*6</option>\n                <option value="7">7*7</option>\n                <option value="8">8*8</option>\n              </select>\n          </div>\n\n          <div class="config_sounds-container">\n            <label class="config__sounds" for="config__sounds_chkbox_id">Звук при движении костяшек</label>\n            <input type="checkbox" class="config__sounds_chkbox" id="config__sounds_chkbox_id">\n          </div>\n\n        </fieldset>\n\n      </article>\n\n    </article>\n  '),r.DOMElm.rootElm.insertAdjacentHTML("beforebegin",'\n  <div class="game-controls-container">\n    <button class="game-controls-btn game-controls-new-btn">новая игра</button>\n    <button class="game-controls-btn game-controls-save-btn">сохранить текущую</button>\n    <button class="game-controls-btn game-controls-load-btn">загрузить ранее сохраненную</button>\n  </div>\n  '),r.DOMElm.rootElm.insertAdjacentHTML("beforebegin",'\n    <article class="game-container-bg">\n      <article class="game-container">\n\n        <fieldset class="fieldset">\n          <legend>Текущий результат</legend>\n            <span>ходов:</span> <strong class="game-steps">0</strong>\n            <span>длительность:</span> <strong class="game-duration">00:00</strong>\n        </fieldset>\n\n        <div class="game-area game-area-3"></div>\n\n      </article>\n    </article>\n  '),r.DOMElm.rootElm.insertAdjacentHTML("beforebegin",'\n  <article class="desc-container">\n    <h3>Что сделано</h3>\n    <ul>\n      <li>Basic scope +30\n        <ul>\n          <li> вёрстка, дизайн, UI: +10</li>\n          <li> состояние игрового поля генерируется случайным образом: +10</li>\n          <li> при клике по фишке, стоящей рядом с пустой клеткой, фишка перемещается на место пустой клетки: +10</li>\n        </ul>\n      <li>Advanced scope +60\n        <ul>\n          <li> игру можно начать заново без перезагрузки страницы: +10</li>\n          <li> отображается время игры и количество ходов: +10</li>\n          <li> фишки можно перетягивать мышкой: +10</li>\n          <li> реализовано сохранение состояния игры и сохранение 10 лучших результатов с использованием LocalStorage: +10</li>\n          <li> реализован выбор размера поля: +10</li>\n          <li> звуковое сопровождение передвижения фишек: +10</li>\n        </ul>\n      </li>\n      <li>Hacker scope +20\n        <ul>\n          <li>анимация перемещения пятнашек на поле: +10</li>\n          <li>когда игра закончилась, выводится сообщение «Ура! Вы решили головоломку за ##:## и N ходов»: +10</li>\n        </ul>\n      </li>\n      <li>Технические (проверяются ментором):\n        <ul>\n          <li> подключен и используется eslint, : +10</li>\n          <li> подключен и используется webpack, : +10</li>\n          <li> приложение разбито на отдельные модули, используются фишки es6 и выше (на усмотрение ментора): +20</li>\n        </ul>\n      </li>\n      </li>\n    </ul>\n  </article>\n  '),r.updateDOMElmList(),document.querySelector(".game-controls-new-btn").addEventListener("click",(function(n){confirm("Будет создана новая игра.\nТекущая игра будет потеряна.\nПодтвердите.")&&(r.restartGame(l),c())})),document.querySelector(".game-controls-save-btn").addEventListener("click",(function(n){confirm('Текущая игра будет сохранена.\nВы сможете загрузить её по кнопке "загрузить ранее сохраненную игру".\n\nПодтвердите.')&&r.saveCurrentGame()})),document.querySelector(".game-controls-load-btn").addEventListener("click",(function(n){confirm('Текущая игра будет перезаписана ранее сохраненной игрой.\nВы не сможете вернуться к текущй игре".\n\nПодтвердите.')&&(r.loadCurrentGame(),r.DOMElm.areaSizeElm&&(r.DOMElm.areaSizeElm.value=r.config.areaSize),r.DOMElm.soundElm&&(r.DOMElm.soundElm.checked=r.config.isSound),c())})),r.DOMElm.areaSizeElm&&r.DOMElm.areaSizeElm.addEventListener("change",(function(n){confirm("При смене размера поля игра начнется заново, подвтердите")?(r.config.areaSize=+this.value,r.restartGame(l),c()):this.value=r.config.areaSize})),r.DOMElm.gameArea&&r.DOMElm.gameArea.addEventListener("click",(function(n){r.moveDomino(+n.target.dataset.idx,c)})),r.DOMElm.soundElm&&r.DOMElm.soundElm.addEventListener("change",(function(n){r.config.isSound=this.checked})),a(),c()},815:(n,e,t)=>{"use strict";t.d(e,{Z:()=>s});var r=t(15),i=t.n(r),o=t(645),a=t.n(o)()(i());a.push([n.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const s=a},922:(n,e,t)=>{"use strict";t.d(e,{Z:()=>s});var r=t(15),i=t.n(r),o=t(645),a=t.n(o)()(i());a.push([n.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const s=a},645:n=>{"use strict";n.exports=function(n){var e=[];return e.toString=function(){return this.map((function(e){var t=n(e);return e[2]?"@media ".concat(e[2]," {").concat(t,"}"):t})).join("")},e.i=function(n,t,r){"string"==typeof n&&(n=[[null,n,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<n.length;s++){var l=[].concat(n[s]);r&&i[l[0]]||(t&&(l[2]?l[2]="".concat(t," and ").concat(l[2]):l[2]=t),e.push(l))}},e}},15:n=>{"use strict";function e(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(n)))return;var t=[],r=!0,i=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done)&&(t.push(a.value),!e||t.length!==e);r=!0);}catch(n){i=!0,o=n}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return t}(n,e)||function(n,e){if(!n)return;if("string"==typeof n)return t(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(n,e)}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}n.exports=function(n){var t=e(n,4),r=t[1],i=t[3];if("function"==typeof btoa){var o=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),a="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),s="/*# ".concat(a," */"),l=i.sources.map((function(n){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(n," */")}));return[r].concat(l).concat([s]).join("\n")}return[r].join("\n")}},379:(n,e,t)=>{"use strict";var r,i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},o=function(){var n={};return function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}n[e]=t}return n[e]}}(),a=[];function s(n){for(var e=-1,t=0;t<a.length;t++)if(a[t].identifier===n){e=t;break}return e}function l(n,e){for(var t={},r=[],i=0;i<n.length;i++){var o=n[i],l=e.base?o[0]+e.base:o[0],c=t[l]||0,u="".concat(l," ").concat(c);t[l]=c+1;var m=s(u),d={css:o[1],media:o[2],sourceMap:o[3]};-1!==m?(a[m].references++,a[m].updater(d)):a.push({identifier:u,updater:p(d,e),references:1}),r.push(u)}return r}function c(n){var e=document.createElement("style"),r=n.attributes||{};if(void 0===r.nonce){var i=t.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(n){e.setAttribute(n,r[n])})),"function"==typeof n.insert)n.insert(e);else{var a=o(n.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}return e}var u,m=(u=[],function(n,e){return u[n]=e,u.filter(Boolean).join("\n")});function d(n,e,t,r){var i=t?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(n.styleSheet)n.styleSheet.cssText=m(e,i);else{var o=document.createTextNode(i),a=n.childNodes;a[e]&&n.removeChild(a[e]),a.length?n.insertBefore(o,a[e]):n.appendChild(o)}}function f(n,e,t){var r=t.css,i=t.media,o=t.sourceMap;if(i?n.setAttribute("media",i):n.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),n.styleSheet)n.styleSheet.cssText=r;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(r))}}var g=null,h=0;function p(n,e){var t,r,i;if(e.singleton){var o=h++;t=g||(g=c(e)),r=d.bind(null,t,o,!1),i=d.bind(null,t,o,!0)}else t=c(e),r=f.bind(null,t,e),i=function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(t)};return r(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap)return;r(n=e)}else i()}}n.exports=function(n,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=i());var t=l(n=n||[],e);return function(n){if(n=n||[],"[object Array]"===Object.prototype.toString.call(n)){for(var r=0;r<t.length;r++){var i=s(t[r]);a[i].references--}for(var o=l(n,e),c=0;c<t.length;c++){var u=s(t[c]);0===a[u].references&&(a[u].updater(),a.splice(u,1))}t=o}}}}},0,[[45,666]]]);